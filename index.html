<script>
  let cartes = [];

  // Charger le fichier JSON
  fetch('cartes.json')
    .then(response => response.json())
    .then(data => {
      cartes = data;
    })
    .catch(error => {
      document.getElementById('carte').innerText = "Erreur de chargement des cartes.";
      console.error("Erreur JSON :", error);
    });

  function tirerCarte() {
    if (!cartes || cartes.length === 0) {
      document.getElementById('carte').innerText = "Aucune carte disponible.";
      return;
    }

    const carte = cartes[Math.floor(Math.random() * cartes.length)];
    let contenu = "";

    if ("texte" in carte) {
      contenu = `<p>${carte.texte}</p>`;
    } else {
      contenu = `
        <h2>${carte.titre || "Carte sans titre"}</h2>
        <p><strong>Action :</strong> ${carte.action || "—"}</p>
        <p><strong>Phrase :</strong> ${carte.phrase || "—"}</p>
        <p><strong>Effet :</strong> ${carte.effet || "—"}</p>
      `;
    }

    document.getElementById('carte').innerHTML = contenu;
  }
</script>
